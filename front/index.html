<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="UTF-8">
	<title>SGBD</title>
	<!-- Jquery-->
	<script language="javascript" type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
	<h1>bonjour</h1>

	<button onclick="getApi('adherent', 'GET')">Adherent</button>
	<button onclick="getApi('commune', 'GET')">Communes</button>
	<button onclick="getApi('emprunt', 'GET')">Emprunt</button>
	<button onclick="getApi('station', 'GET')">Station</button>
	<button onclick="getApi('velo', 'GET')">Velo</button>


	<div id="apiResult"></div>

	<script>

		function getApi(api, method) {
			sendRequest("/api/" + api, method, insert);
		}

		function insert(text) {
			$("#apiResult").empty();
			$("#apiResult").append("<p>" + text + "</p>")
			console.log(text[0]);
		}


		function sendRequest(url, method, callback) {
	
			var xmlHttp = new XMLHttpRequest();
			xmlHttp.onreadystatechange = function () {
				if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
					callback(JSON.parse(xmlHttp.response));
				}
			}
			xmlHttp.open(method, url, true);
			xmlHttp.send();
		}

	</script>
</body>

</html>